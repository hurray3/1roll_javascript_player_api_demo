<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>demo</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <style>
        .player-wrapper{
            width:360px;
        }
        .player{
            width:100%;
            padding-bottom: 56.25%;
            height:0px;
            position: relative;
        }
        .player iframe{
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        </style>

        <script>

        var tag = document.createElement('script');
        tag.src = "https://cloud-player.1roll.jp/iframe-api?version=0.1.0";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);            

        var playerManager;
        var players = [];
        
        var videos = [
            {
                videoId: "reUuC88AE0PD", 
                tagId: "player-demo1"
            },
            {
                videoId: "reUuC88AE0PD", 
                tagId: "player-demo2"
            }
        ];
        
        function onOnerollIframeAPIReady(){

            playerManager = new OnerollPlayerManager();
            
            for(var key in videos){
                var video = videos[key];
                
                var player = playerManager.create(
                    video.tagId,
                    {
                        videoId: video.videoId,
                        allowfullscreen: true,
                        jsonld: true,
                        events:{
                            onPlayerReady:       onPlayerReady,
                            onPlayerStateChange: onPlayerStateChange,
                            onPlayerTime:        onPlayerTime,
                            onPlayed0P:          onPlayed0P,
                            onPlayed25P:         onPlayed25P,
                            onPlayed50P:         onPlayed50P,
                            onPlayed75P:         onPlayed75P,
                            onPlayed90P:         onPlayed90P,
                            onPlayed99P:         onPlayed99P
                        },
                        attributes: {
                            class: 'player-iframe'
                        }
                    }
                );
                players.push(player);                
            }
        }

        function onPlayerReady(event) {
            console.log(event.target.videoId, event.target.getDuration());  
        }

        function onPlayerStateChange(event) {
            console.log(event.target.videoId, event);
        }

        function onPlayerTime(event) {
            console.log(event.target.videoId, event);
        }

        function onPlayed0P(event){
            console.log(event.target.videoId, "0% played");
        }
        function onPlayed25P(event){
            console.log(event.target.videoId, "25% played");
        }
        function onPlayed50P(event){
            console.log(event.target.videoId, "50% played");
        }
        function onPlayed75P(event){
            console.log(event.target.videoId, "75% played");
        }
        function onPlayed90P(event){
            console.log(event.target.videoId, "90% played");
        }
        function onPlayed99P(event){
            console.log(event.target.videoId, "99% played");
        }
        </script>
    </head>
    <body>
        <div class="player-wrapper">
            <div class="player" id="player-demo1"></div>
            <div class="player" id="player-demo2"></div>
        </div>
    </body>
</html>
